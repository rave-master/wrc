<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wildlife Rescue Dashboard</title>
    <link rel="icon" href="https://ia601205.us.archive.org/12/items/icon_20250717/icon.png" type="image/png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .card-hover { transition: all 0.3s ease; }
        .card-hover:hover { transform: translateY(-8px); box-shadow: 0 20px 40px rgba(0,0,0,0.15); }
        .modal-backdrop { backdrop-filter: blur(8px); }
        .status-critical-i { background: linear-gradient(135deg, #ef4444, #dc2626); }
        .status-critical-ii { background: linear-gradient(135deg, #f97316, #ea580c); }
        .status-stable { background: linear-gradient(135deg, #10b981, #059669); }
        .status-recovering { background: linear-gradient(135deg, #3b82f6, #2563eb); }
        .loading-shimmer {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
    </style>
</head>
<body class="min-h-screen bg-[url('de.jpg')] bg-no-repeat bg-fixed bg-center bg-cover">
    <!-- Header -->
    <header class="bg-white/80 backdrop-blur-md border-b border-green-200 sticky top-0 z-40">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex items-center justify-between">
                <div class="flex flex-col">
                    <div class="flex items-center space-x-3 mb-2">
                        <div class="w-10 h-10 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center">
                    <img src="2x2.gif" alt="icon" class="w-6 h-6" />
                    </div>
                        <div>
                            <h1 class="text-2xl font-bold text-gray-900">Wildlife Rescue Center Dashboard</h1>
                            <p class="text-sm text-gray-600 italic">So. Mandaapan, Brgy. New Balamban, Tagum City, Davao del Norte</p>
                        </div>
                    </div>
                    <!-- Navigation Menu -->
                    <nav class="hidden lg:flex items-center space-x-6 ml-13">
                        <a href="https://maps.app.goo.gl/j9geHzZAw9ketqCK7" class="text-xs text-gray-700 hover:text-green-600 font-medium transition-colors">üìçLocation</a>
                        <a href="/About" class="text-xs text-gray-700 hover:text-green-600 font-medium transition-colors">About Us</a>
                        <a href="#stories" class="text-xs text-gray-700 hover:text-green-600 font-medium transition-colors">Rescue Stories</a>
                        
                        <!-- How You Can Help Dropdown -->
                        <div class="relative group">
                            <button class="text-xs text-gray-700 hover:text-green-600 font-medium transition-colors flex items-center space-x-1">
                                <span>How You Can Help</span>
                                <svg class="w-3 h-3 transition-transform group-hover:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </button>
                            <div class="absolute top-full left-0 mt-2 w-64 bg-white rounded-xl shadow-lg border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform group-hover:translate-y-0 translate-y-2">
                                <div class="py-2">
                                    <a href="#virtual-adoptions" class="block px-4 py-3 text-sm text-gray-700 hover:bg-green-50 hover:text-green-600 transition-colors">
                                        <div class="flex items-center space-x-3">
                                            <span class="text-lg">üíù</span>
                                            <span>Virtual Adoptions</span>
                                        </div>
                                    </a>
                                    <a href="#sponsor" class="block px-4 py-3 text-sm text-gray-700 hover:bg-green-50 hover:text-green-600 transition-colors">
                                        <div class="flex items-center space-x-3">
                                            <span class="text-lg">ü§ù</span>
                                            <span>Sponsor an Animal</span>
                                        </div>
                                    </a>
                                    <a href="#in-kind" class="block px-4 py-3 text-sm text-gray-700 hover:bg-green-50 hover:text-green-600 transition-colors">
                                        <div class="flex items-center space-x-3">
                                            <span class="text-lg">üì¶</span>
                                            <span>In-Kind Support</span>
                                        </div>
                                    </a>
                                    <a href="#foster" class="block px-4 py-3 text-sm text-gray-700 hover:bg-green-50 hover:text-green-600 transition-colors">
                                        <div class="flex items-center space-x-3">
                                            <span class="text-lg">üè†</span>
                                            <span>Foster Care Info</span>
                                        </div>
                                    </a>
                                    <a href="#social-media" class="block px-4 py-3 text-sm text-gray-700 hover:bg-green-50 hover:text-green-600 transition-colors">
                                        <div class="flex items-center space-x-3">
                                            <span class="text-lg">üì±</span>
                                            <span>Spread Awareness</span>
                                        </div>
                                    </a>
                                </div>
                            </div>
                        </div>
                        <!-- Contact Dropdown -->
                        <div class="relative group">
                            <button class="text-xs text-gray-700 hover:text-green-600 font-medium transition-colors flex items-center space-x-1">
                                <span>Contact</span>
                                <svg class="w-3 h-3 transition-transform group-hover:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </button>
                            <div class="absolute top-full left-0 mt-2 w-64 bg-white rounded-xl shadow-lg border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform group-hover:translate-y-0 translate-y-2">
                                <div class="py-2">
                                    <a class="block px-4 py-3 text-sm text-gray-700 hover:bg-green-50 hover:text-green-600 transition-colors">
                                        <div class="flex items-center space-x-3">
                                            <span class="text-lg">üìß</span>
                                            <span>wrcpenroddn@gmail.com</span>                                    
                                        </div>
                                    </a>
                                    <a class="block px-4 py-3 text-sm text-gray-700 hover:bg-green-50 hover:text-green-600 transition-colors">
                                        <div class="flex items-center space-x-3">
                                            <span class="text-lg">üì±</span>
                                            <span>(084)-216-6302<br>09351966211</span>
                                        </div>
                                    </a>
                                    <a href="https://maps.app.goo.gl/KizBckhnd7mzN6sF9" class="block px-4 py-3 text-sm text-gray-700 hover:bg-green-50 hover:text-green-600 transition-colors">
                                        <div class="flex items-center space-x-3">
                                            <span class="text-lg">üó∫Ô∏è</span>
                                            <span>Site Map</span>
                                        </div>
                                    </a>
                                    <a href="https://maps.app.goo.gl/N6yCFR8mWJD9GDu28" class="block px-4 py-3 text-sm text-gray-700 hover:bg-green-50 hover:text-green-600 transition-colors">
                                        <div class="flex items-center space-x-3">
                                            <span class="text-lg">üè¢</span>
                                            <span>CENRO New Corella</span>
                                        </div>
                                    </a>
                                    <a href="https://maps.app.goo.gl/BLf81SwKDj63GTaj8" class="block px-4 py-3 text-sm text-gray-700 hover:bg-green-50 hover:text-green-600 transition-colors">
                                        <div class="flex items-center space-x-3">
                                            <span class="text-lg">üèõÔ∏è</span>
                                            <span>DENR-PENRO Tagum City</span>
                                        </div>
                                    </a>
                                </div>
                            </div>
                        </div>
                        <a href="https://forms.gle/TquCmZPVkbRhcrw96" class="text-xs text-red-600 hover:text-red-700 font-medium transition-colors bg-red-50 px-2 py-1 rounded-lg hover:bg-red-100">Report Emergency</a>
                     
                        <a href="#support" class="text-xs bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded-lg font-medium transition-colors">Support Us</a>
                    </nav>
                </div>
                
                <!-- Mobile Menu Button -->
                <div class="lg:hidden flex items-center space-x-4">
                    <div class="bg-green-100 px-3 py-1 rounded-full">
                        <span class="text-green-800 font-medium text-sm" id="totalCount">Loading...</span>
                    </div>
                    <button onclick="toggleMobileMenu()" class="text-gray-700 hover:text-green-600 transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </button>
                </div>
                
                <!-- Desktop Total Count (hidden on mobile) -->
                <div class="hidden lg:flex items-center space-x-4">
                    <div class="bg-green-100 px-4 py-2 rounded-full">
                        <span class="text-green-800 font-medium" id="totalCountDesktop">Loading...</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Mobile Menu -->
        <div id="mobileMenu" class="lg:hidden hidden bg-white/95 backdrop-blur-md border-t border-green-200">
            <div class="max-w-7xl mx-auto px-4 py-4">
                <div class="space-y-3">
                    <a href="#home" class="block text-gray-700 hover:text-green-600 font-medium py-2 transition-colors">Home</a>
                    <a href="/About/" class="block text-gray-700 hover:text-green-600 font-medium py-2 transition-colors">About Us</a>
                    <a href="#stories" class="block text-gray-700 hover:text-green-600 font-medium py-2 transition-colors">Rescue Stories</a>
                    
                    <!-- Mobile How You Can Help -->
                    <div class="border-l-4 border-green-200 pl-4 ml-2">
                        <p class="text-gray-600 font-medium text-sm mb-2">How You Can Help:</p>
                        <div class="space-y-2">
                            <a href="#virtual-adoptions" class="block text-sm text-gray-600 hover:text-green-600 py-1 transition-colors">üíù Virtual Adoptions</a>
                            <a href="#sponsor" class="block text-sm text-gray-600 hover:text-green-600 py-1 transition-colors">ü§ù Sponsor an Animal</a>
                            <a href="#in-kind" class="block text-sm text-gray-600 hover:text-green-600 py-1 transition-colors">üì¶ In-Kind Support</a>
                            <a href="#foster" class="block text-sm text-gray-600 hover:text-green-600 py-1 transition-colors">üè† Foster Care Info</a>
                            <a href="#social-media" class="block text-sm text-gray-600 hover:text-green-600 py-1 transition-colors">üì± Spread Awareness</a>
                        </div>
                    </div>
                    
                    <a href="#report" class="block text-red-600 hover:text-red-700 font-medium py-2 transition-colors bg-red-50 px-3 rounded-lg">üö® Report Emergency</a>
                    
                    <!-- Mobile Contact Dropdown (expanded as section) -->
                    <div class="border-l-4 border-green-200 pl-4 ml-2 mt-2">
                        <p class="text-gray-600 font-medium text-sm mb-2">Contact:</p>
                        <div class="space-y-2">
                            <div class="flex items-center space-x-3">
                                <span class="text-lg">üìß</span>
                                <span class="text-sm text-gray-700">wrcpenroddn@gmail.com</span>
                            </div>
                            <div class="flex items-center space-x-3">
                                <span class="text-lg">üì±</span>
                                <span class="text-sm text-gray-700">(084)-216-6302<br>09351966211</span>
                            </div>
                            <a href="https://maps.app.goo.gl/KizBckhnd7mzN6sF9" class="flex items-center space-x-3 hover:text-green-600 transition-colors">
                                <span class="text-lg">üó∫Ô∏è</span>
                                <span class="text-sm text-gray-700">Site Map</span>
                            </a>
                            <a href="https://maps.app.goo.gl/N6yCFR8mWJD9GDu28" class="flex items-center space-x-3 hover:text-green-600 transition-colors">
                                <span class="text-lg">üè¢</span>
                                <span class="text-sm text-gray-700">CENRO New Corella</span>
                            </a>
                            <a href="https://maps.app.goo.gl/BLf81SwKDj63GTaj8" class="flex items-center space-x-3 hover:text-green-600 transition-colors">
                                <span class="text-lg">üèõÔ∏è</span>
                                <span class="text-sm text-gray-700">DENR-PENRO Tagum City</span>
                            </a>
                        </div>
                    </div>
                    
                    <a href="#support" class="block bg-green-600 hover:bg-green-700 text-white px-4 py-3 rounded-lg font-medium transition-colors text-center mt-2">Support Us</a>
                </div>
            </div>
        </div>
    </header>

    <!-- Filters -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
        <div class="bg-white/70 backdrop-blur-sm rounded-2xl p-6 border border-white/50 shadow-lg">
            <div class="flex flex-wrap gap-4 items-center justify-between">
                <div class="flex flex-wrap gap-4 items-center">
                    <div class="flex items-center space-x-2">
                        <label class="text-sm font-medium text-gray-700">Species:</label>
                        <select id="speciesFilter" class="bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent">
                            <option value="">All Species</option>
                        </select>
                    </div>
                    <div class="flex items-center space-x-2">
                        <label class="text-sm font-medium text-gray-700">Status:</label>
                        <select id="statusFilter" class="bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent">
                            <option value="">All Status</option>
                            <option value="Critical I">Critical I</option>
                            <option value="Critical II">Critical II</option>
                            <option value="Stable">Stable</option>
                            <option value="Recovering">Recovering</option>
                        </select>
                    </div>
                    <div class="flex items-center space-x-2">
                        <label class="text-sm font-medium text-gray-700">Year:</label>
                        <select id="yearFilter" class="bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-green-500 focus:border-transparent">
                            <option value="">All Years</option>
                        </select>
                    </div>

                    <button onclick="clearFilters()" class="bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-lg text-sm font-medium text-gray-700 transition-colors">
                        Clear Filters
                    </button>
                    <a href="/Analytics/" class="ml-2 inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium text-white bg-gradient-to-r from-green-500 via-emerald-500 to-green-600 hover:from-green-600 hover:to-emerald-700 shadow-lg transition-all duration-200 animate-pulse group">
                        <svg class="w-5 h-5 mr-2 text-white group-hover:scale-110 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <rect x="3" y="12" width="4" height="8" rx="1" class="fill-current text-green-200 group-hover:text-white" />
                            <rect x="9" y="8" width="4" height="12" rx="1" class="fill-current text-green-300 group-hover:text-white" />
                            <rect x="15" y="4" width="4" height="16" rx="1" class="fill-current text-green-400 group-hover:text-white" />
                        </svg>
                        Analytics
                    </a>
                </div>
                <button onclick="toggleLegend()" class="bg-blue-100 hover:bg-blue-200 px-4 py-2 rounded-lg text-sm font-medium text-blue-700 transition-colors flex items-center space-x-2">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <span>Legend</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Legend Panel -->
    <div id="legendPanel" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-6 hidden">
        <div class="bg-white/90 backdrop-blur-sm rounded-2xl p-6 border border-blue-200 shadow-lg">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-lg font-semibold text-gray-900 flex items-center space-x-2">
                    <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                    <span>Legend & Definitions</span>
                </h3>
                <button onclick="toggleLegend()" class="text-gray-400 hover:text-gray-600 transition-colors">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- Health Status Legend -->
                <div class="bg-gradient-to-br from-red-50 to-green-50 rounded-xl p-4">
                    <h4 class="font-semibold text-gray-900 mb-3 flex items-center space-x-2">
                        <div class="w-3 h-3 bg-gradient-to-r from-red-500 to-green-500 rounded-full"></div>
                        <span>Health Status</span>
                    </h4>
                    <div class="space-y-3 text-sm">
                        <div class="flex items-start space-x-3">
                            <span class="px-2 py-1 rounded-full text-xs font-medium text-white status-critical-i flex-shrink-0">Critical I</span>
                            <p class="text-gray-700">Exhibits signs of weakness, visible injuries, etc., under close observation</p>
                        </div>
                        <div class="flex items-start space-x-3">
                            <span class="px-2 py-1 rounded-full text-xs font-medium text-white status-critical-ii flex-shrink-0">Critical II</span>
                            <p class="text-gray-700">Severely debilitated or extremely weak; requires urgent veterinary intervention</p>
                        </div>
                        <div class="flex items-start space-x-3">
                            <span class="px-2 py-1 rounded-full text-xs font-medium text-white status-recovering flex-shrink-0">Recovering</span>
                            <p class="text-gray-700">Improving from previous injury, illness, or weakness; shows signs of healing but not yet fully stable</p>
                        </div>
                        <div class="flex items-start space-x-3">
                            <span class="px-2 py-1 rounded-full text-xs font-medium text-white status-stable flex-shrink-0">Stable I</span>
                            <p class="text-gray-700">Healthy but still under close observation; may need monitoring to ensure recovery/adaptation</p>
                        </div>
                        <div class="flex items-start space-x-3">
                            <span class="px-2 py-1 rounded-full text-xs font-medium text-white status-stable flex-shrink-0">Stable II</span>
                            <p class="text-gray-700">Healthy and stable, exhibiting normal activity and behavior; ready for release</p>
                        </div>
                    </div>
                </div>

                <!-- Biogeography Status Legend -->
                <div class="bg-gradient-to-br from-orange-50 to-purple-50 rounded-xl p-4">
                    <h4 class="font-semibold text-gray-900 mb-3 flex items-center space-x-2">
                        <div class="w-3 h-3 bg-gradient-to-r from-orange-500 to-purple-500 rounded-full"></div>
                        <span>Biogeography Status</span>
                    </h4>
                    <div class="space-y-3 text-sm">
                        <div class="flex items-start space-x-3">
                            <span class="px-2 py-1 rounded-full text-xs font-medium bg-orange-600 text-white flex-shrink-0">Endemic</span>
                            <p class="text-gray-700">Species that are found only in the Philippines and nowhere else in the world</p>
                        </div>
                        <div class="flex items-start space-x-3">
                            <span class="px-2 py-1 rounded-full text-xs font-medium bg-blue-600 text-white flex-shrink-0">Native</span>
                            <p class="text-gray-700">Species that naturally occur in the Philippines but are also distributed in other countries</p>
                        </div>
                        <div class="flex items-start space-x-3">
                            <span class="px-2 py-1 rounded-full text-xs font-medium bg-purple-600 text-white flex-shrink-0">Introduced</span>
                            <p class="text-gray-700">Species not naturally found in the Philippines, brought in through human activity (pet trade, etc.)</p>
                        </div>
                    </div>
                </div>

                <!-- Release Methods Legend -->
                <div class="bg-gradient-to-br from-teal-50 to-cyan-50 rounded-xl p-4">
                    <h4 class="font-semibold text-gray-900 mb-3 flex items-center space-x-2">
                        <div class="w-3 h-3 bg-gradient-to-r from-teal-500 to-cyan-500 rounded-full"></div>
                        <span>Release Methods</span>
                    </h4>
                    <div class="space-y-3 text-sm">
                        <div class="flex items-start space-x-3">
                            <span class="px-2 py-1 rounded-full text-xs font-medium bg-teal-600 text-white flex-shrink-0">Hard Release</span>
                            <p class="text-gray-700">Direct release into the wild without transitional support or monitoring</p>
                        </div>
                        <div class="flex items-start space-x-3">
                            <span class="px-2 py-1 rounded-full text-xs font-medium bg-cyan-600 text-white flex-shrink-0">Soft Release</span>
                            <p class="text-gray-700">Gradual release with temporary enclosures, feeding support, and close monitoring</p>
                        </div>
                    </div>
                </div>

                <!-- IUCN Conservation Status -->
                <div class="bg-gradient-to-br from-yellow-50 to-red-50 rounded-xl p-4">
                    <h4 class="font-semibold text-gray-900 mb-3 flex items-center space-x-2">
                        <div class="w-3 h-3 bg-gradient-to-r from-yellow-500 to-red-500 rounded-full"></div>
                        <span>IUCN Conservation Status</span>
                    </h4>
                    <div class="space-y-2 text-sm">
                        <div class="flex items-center space-x-3">
                            <span class="px-2 py-1 rounded-full text-xs font-medium bg-green-600 text-white flex-shrink-0">LC</span>
                            <span class="text-gray-700">Least Concern</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <span class="px-2 py-1 rounded-full text-xs font-medium bg-yellow-600 text-white flex-shrink-0">NT</span>
                            <span class="text-gray-700">Near Threatened</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <span class="px-2 py-1 rounded-full text-xs font-medium bg-orange-600 text-white flex-shrink-0">VU</span>
                            <span class="text-gray-700">Vulnerable</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <span class="px-2 py-1 rounded-full text-xs font-medium bg-red-600 text-white flex-shrink-0">EN</span>
                            <span class="text-gray-700">Endangered</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <span class="px-2 py-1 rounded-full text-xs font-medium bg-red-800 text-white flex-shrink-0">CR</span>
                            <span class="text-gray-700">Critically Endangered</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading State -->
    <div id="loadingState" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-12">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            <div class="bg-white rounded-2xl overflow-hidden shadow-lg">
                <div class="loading-shimmer h-48"></div>
                <div class="p-4">
                    <div class="loading-shimmer h-4 rounded mb-2"></div>
                    <div class="loading-shimmer h-3 rounded w-3/4"></div>
                </div>
            </div>
            <div class="bg-white rounded-2xl overflow-hidden shadow-lg">
                <div class="loading-shimmer h-48"></div>
                <div class="p-4">
                    <div class="loading-shimmer h-4 rounded mb-2"></div>
                    <div class="loading-shimmer h-3 rounded w-3/4"></div>
                </div>
            </div>
            <div class="bg-white rounded-2xl overflow-hidden shadow-lg">
                <div class="loading-shimmer h-48"></div>
                <div class="p-4">
                    <div class="loading-shimmer h-4 rounded mb-2"></div>
                    <div class="loading-shimmer h-3 rounded w-3/4"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Cards Grid -->
    <div id="cardsContainer" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-12 hidden">
        <div id="cardsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            <!-- Cards will be populated here -->
        </div>
    </div>

    <!-- Modal -->
    <div id="modal" class="fixed inset-0 z-50 hidden">
        <div class="modal-backdrop bg-black/50 absolute inset-0" onclick="closeModal()"></div>
        <div class="relative z-10 flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-3xl max-w-2xl w-full max-h-[90vh] overflow-y-auto shadow-2xl">
                <div id="modalContent">
                    <!-- Modal content will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Species Information Modal -->
    <div id="speciesModal" class="fixed inset-0 z-60 hidden">
        <div class="modal-backdrop bg-black/60 absolute inset-0" onclick="closeSpeciesModal()"></div>
        <div class="relative z-10 flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-3xl max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-2xl">
                <div id="speciesModalContent">
                    <!-- Species modal content will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gradient-to-br from-gray-900 via-green-900 to-emerald-900 text-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
            <!-- Contact Information -->
            <div class="space-y-4">
                <h3 class="text-lg font-semibold text-green-300 mb-4">Contact Information</h3>
                <div class="space-y-3 text-sm">
                <div class="flex items-start space-x-3">
                    <svg class="w-5 h-5 text-green-400 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    </svg>
                    <div>
                    <p class="text-gray-300">So. Mandaapan, Brgy. New Balamban, Tagum City,</p>
                    <p class="text-gray-300"> Davao del Norte 8100</p>
                    </div>
                </div>
                <div class="flex items-center space-x-3">
                    <svg class="w-5 h-5 text-green-400 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                    </svg>
                    <p class="text-gray-300">(084)-216-6302<br>09351966211</p>
                 
                </div>
                <div class="flex items-center space-x-3">
                    <svg class="w-5 h-5 text-green-400 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                    </svg>
                    <p class="text-gray-300">wrcpenroddn@gmail.com <br>denrpenrodavaodelnorte@gmail.com</p>
                </div>
                <div class="flex items-center space-x-3">
                    <svg class="w-5 h-5 text-green-400 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <div>
                    <p class="text-gray-300">Mon-Fri: 8:00 AM - 5:00 PM</p>
                    <p class="text-gray-300">Emergency: 24/7</p>
                    </div>
                </div>
                </div>
                
                <div class="pt-4">
                <h4 class="text-md font-medium text-green-300 mb-2">Terms of Use</h4>
                <a href="#terms" class="text-sm text-gray-300 hover:text-green-300 transition-colors">View Terms & Conditions</a>
                </div>
            </div>

            <!-- Get Involved -->
            <div class="space-y-4">
                <h3 class="text-lg font-semibold text-green-300 mb-4">Volunteer / Get Involved</h3>
                <div class="space-y-3">
                <div>
                    <h4 class="text-sm font-medium text-white mb-2">ü§ù Volunteer Opportunities</h4>
                    <ul class="space-y-1 text-sm text-gray-300">
                    <li><a href="#volunteer-care" class="hover:text-green-300 transition-colors">Animal Care Assistant</a></li>
                    <li><a href="#volunteer-education" class="hover:text-green-300 transition-colors">Education Programs</a></li>
                    <li><a href="#volunteer-events" class="hover:text-green-300 transition-colors">Event Support</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-sm font-medium text-white mb-2">üéì Internships</h4>
                    <ul class="space-y-1 text-sm text-gray-300">
                    <li><a href="#intern-veterinary" class="hover:text-green-300 transition-colors">Veterinary Students</a></li>
                    <li><a href="#intern-biology" class="hover:text-green-300 transition-colors">Biology & Conservation</a></li>
                    <li><a href="#intern-research" class="hover:text-green-300 transition-colors">Research Programs</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-sm font-medium text-white mb-2">üåç Community Outreach</h4>
                    <ul class="space-y-1 text-sm text-gray-300">
                    <li><a href="#outreach-schools" class="hover:text-green-300 transition-colors">School Visits</a></li>
                    <li><a href="#outreach-community" class="hover:text-green-300 transition-colors">Community Workshops</a></li>
                    <li><a href="#outreach-awareness" class="hover:text-green-300 transition-colors">Awareness Campaigns</a></li>
                    </ul>
                </div>
                </div>
            </div>

            <!-- How You Can Help -->
            <div class="space-y-4">
                <h3 class="text-lg font-semibold text-green-300 mb-4">How You Can Help</h3>
                <div class="space-y-3">
                <div>
                    <h4 class="text-sm font-medium text-white mb-2">üíù Support Programs</h4>
                    <ul class="space-y-1 text-sm text-gray-300">
                    <li><a href="#virtual-adoptions" class="hover:text-green-300 transition-colors">Virtual Adoptions</a></li>
                    <li><a href="#sponsor-animal" class="hover:text-green-300 transition-colors">Animal Sponsorships</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-sm font-medium text-white mb-2">üì¶ In-Kind Support</h4>
                    <ul class="space-y-1 text-sm text-gray-300">
                    <li><a href="#supplies-needed" class="hover:text-green-300 transition-colors">Medical Supplies</a></li>
                    <li><a href="#food-donations" class="hover:text-green-300 transition-colors">Food & Equipment</a></li>
                    <li><a href="#wishlist" class="hover:text-green-300 transition-colors">Wishlist Items</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-sm font-medium text-white mb-2">üè† Foster Care</h4>
                    <ul class="space-y-1 text-sm text-gray-300">
                    <li><a href="#foster-info" class="hover:text-green-300 transition-colors">Foster Requirements</a></li>
                    <li><a href="#foster-apply" class="hover:text-green-300 transition-colors">Application Process</a></li>
                    <li><a href="#foster-support" class="hover:text-green-300 transition-colors">Foster Support</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-sm font-medium text-white mb-2">üì± Spread Awareness</h4>
                    <ul class="space-y-1 text-sm text-gray-300">
                    <li><a href="#social-share" class="hover:text-green-300 transition-colors">Share Our Stories</a></li>
                    <li><a href="#advocacy" class="hover:text-green-300 transition-colors">Wildlife Advocacy</a></li>
                    <li><a href="#education" class="hover:text-green-300 transition-colors">Educational Content</a></li>
                    </ul>
                </div>
                </div>
            </div>

            <!-- News & Events -->
            <div class="space-y-4">
                <h3 class="text-lg font-semibold text-green-300 mb-4">Latest News / Blog</h3>
                <div class="space-y-3">
                <div>
                    <h4 class="text-sm font-medium text-white mb-2">üì∞ Recent Stories</h4>
                    <ul class="space-y-1 text-sm text-gray-300">
                    <li><a href="#rescue-stories" class="hover:text-green-300 transition-colors">Rescue Success Stories</a></li>
                    <li><a href="#center-updates" class="hover:text-green-300 transition-colors">Center Updates</a></li>
                    <li><a href="#educational-articles" class="hover:text-green-300 transition-colors">Educational Articles</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-sm font-medium text-white mb-2">üéâ Events & Campaigns</h4>
                    <ul class="space-y-1 text-sm text-gray-300">
                    <li><a href="#fundraising-events" class="hover:text-green-300 transition-colors">Fundraising Events</a></li>
                    <li><a href="#workshops" class="hover:text-green-300 transition-colors">Educational Workshops</a></li>
                    <li><a href="#rescue-drives" class="hover:text-green-300 transition-colors">Rescue Drives</a></li>
                    </ul>
                </div>
                </div>

                <!-- Social Media Links -->
                <div class="pt-4">
                <h4 class="text-sm font-medium text-white mb-3">Follow Us</h4>
                <div class="flex space-x-4">
                    <a href="#facebook" class="text-gray-300 hover:text-blue-400 transition-colors">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                    </svg>
                    </a>
                    <a href="#instagram" class="text-gray-300 hover:text-pink-400 transition-colors">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"></svg>
                        <path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 6.62 5.367 11.987 11.988 11.987 6.62 0 11.987-5.367 11.987-11.987C24.014 5.367 18.637.001 12.017.001zM8.449 16.988c-1.297 0-2.448-.49-3.323-1.297C4.198 14.895 3.708 13.744 3.708 12.447s.49-2.448 1.297-3.323C5.902 8.198 7.053 7.708 8.35 7.708s2.448.49 3.323 1.297c.897.875 1.387 2.026 1.387 3.323s-.49 2.448-1.297 3.323c-.875.897-2.026 1.387-3.323 1.387zm7.718 0c-1.297 0-2.448-.49-3.323-1.297-.897-.875-1.387-2.026-1.387-3.323s.49-2.448 1.297-3.323c.875-.897 2.026-1.387 3.323-1.387s2.448.49 3.323 1.297c.897.875 1.387 2.026 1.387 3.323s-.49 2.448-1.297 3.323c-.875.897-2.026 1.387-3.323 1.387z"/>
                    </svg>
                    </a>
                    <a href="#youtube" class="text-gray-300 hover:text-red-400 transition-colors">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"></svg>
                        <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                    </svg>
                    </a>
                </div>
                </div>
            </div>
            </div>

            <!-- Line Separator Between First and Second Row -->
            <div class="my-8 border-t border-green-800/40"></div>

            <!-- Second Row: Resources, FAQs, Partners, and Newsletter -->
            <div class="md:col-span-2 lg:col-span-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
            <!-- Resources / Education -->
            <div class="space-y-4">
                <h3 class="text-lg font-semibold text-green-300 mb-4">Resources / Education</h3>
                <div class="space-y-3">
                <div>
                    <h4 class="text-sm font-medium text-white mb-2">üÜò Emergency Guides</h4>
                    <ul class="space-y-1 text-sm text-gray-300">
                    <li><a href="#rescue-tips" class="hover:text-green-300 transition-colors">Animal Rescue Tips</a></li>
                    <li><a href="#safety-guides" class="hover:text-green-300 transition-colors">Wildlife Safety Guides</a></li>
                    <li><a href="#first-aid" class="hover:text-green-300 transition-colors">Wildlife First Aid</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-sm font-medium text-white mb-2">üåø Living with Wildlife</h4>
                    <ul class="space-y-1 text-sm text-gray-300">
                    <li><a href="#coexisting" class="hover:text-green-300 transition-colors">Coexisting Tips</a></li>
                    <li><a href="#habitat-protection" class="hover:text-green-300 transition-colors">Habitat Protection</a></li>
                    <li><a href="#prevention" class="hover:text-green-300 transition-colors">Injury Prevention</a></li>
                    </ul>
                </div>
                </div>
            </div>

            <!-- FAQs -->
            <div class="space-y-4">
                <h3 class="text-lg font-semibold text-green-300 mb-4">FAQs</h3>
                <div class="space-y-3">
                <div>
                    <h4 class="text-sm font-medium text-white mb-2">‚ùì Common Questions</h4>
                    <ul class="space-y-1 text-sm text-gray-300">
                    <li><a href="#faq-injured-animal" class="hover:text-green-300 transition-colors">Found an injured animal?</a></li>
                    <li><a href="#faq-what-animals" class="hover:text-green-300 transition-colors">What animals do you rescue?</a></li>
                    <li><a href="https://maps.app.goo.gl/j9geHzZAw9ketqCK7" class="hover:text-green-300 transition-colors">Location to Go</a></li>
                    <li><a href="#faq-operating-hours" class="hover:text-green-300 transition-colors">Operating hours & coverage</a></li>
                    <li><a href="#faq-donations" class="hover:text-green-300 transition-colors">How to donate?</a></li>
                    <li><a href="#faq-volunteer" class="hover:text-green-300 transition-colors">How to volunteer?</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-sm font-medium text-white mb-2">üìû Emergency Contact</h4>
                    <div class="bg-red-900/30 border border-red-700 rounded-lg p-3">
                    <p class="text-red-300 text-sm font-medium">24/7 Emergency Hotline</p>
                    <p class="text-red-200 text-lg font-bold">+63 9351966211</p>
                    <p class="text-red-300 text-xs">For immediate wildlife emergencies</p>
                    </div>
                </div>
                </div>
            </div>

            <!-- Partners & Accreditations -->
            <div class="space-y-4">
                <h3 class="text-lg font-semibold text-green-300 mb-4">Partners & Sponsors</h3>
                <div class="space-y-3">
                <div>
                    <h4 class="text-sm font-medium text-white mb-2">ü§ù Our Partners</h4>
                    <ul class="space-y-1 text-sm text-gray-300">
                    <li><a href="https://denrxisystems.com/" class="hover:text-green-300 transition-colors">DENR-XI</a></li>
                    <li><a href="https://www.facebook.com/TagumCenro/" class="hover:text-green-300 transition-colors">City ENRO Tagum </a></li>
                    <li><a href="https://www.facebook.com/tagumcity/" class="hover:text-green-300 transition-colors">LGU Tagum City</a></li>
                    <li><a href="#universities" class="hover:text-green-300 transition-colors">Partner Universities</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-sm font-medium text-white mb-2">üèÜ ONLINE SERVICES</h4>
                    <ul class="space-y-1 text-sm text-gray-300">
                    <li><a href="https://ofls.denrxisystems.com/wltp" class="text-green-400">‚úì Wildlife Transport Permit</a></li>
                    </ul>
                </div>
                </div>
            </div>

            <!-- Newsletter Signup / Google Form -->
            <div class="space-y-4">
                <h3 class="text-lg font-semibold text-green-300 mb-4">Stay Connected</h3>
                <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSfLxVo2DodYGA7hmu0ZmD1brZzQ0gy2LWC4wHdYYkVGBd7v_w/viewform?embedded=true" width="100%" height="274" frameborder="0" marginheight="0" marginwidth="0" class="rounded-lg bg-white">Loading‚Ä¶</iframe>
                </div>
            </div>
            </div>

            <!-- Bottom Bar -->
            <div class="mt-12 pt-8 pb-6 border-t border-gray-700">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0">
                <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 bg-gradient-to-br from-green-500 to-emerald-600 rounded-lg flex items-center justify-center">
                    <img src="2x2.gif" alt="icon" class="w-6 h-6" />
                    </div>
                    <div>
                    <p class="text-white font-semibold">Wildlife Rescue Center Philippines</p>
                    <p class="text-gray-400 text-sm">Protecting and rehabilitating Philippine wildlife since 2015</p>
                    </div>
                </div>
                <div class="text-center md:text-right">
                    <p class="text-gray-400 text-sm">¬© 2024 Wildlife Rescue Center Philippines. All rights reserved.</p>
                    <div class="flex flex-wrap justify-center md:justify-end space-x-4 mt-2 text-xs">
                    <a href="#privacy" class="text-gray-400 hover:text-green-300 transition-colors">Privacy Policy</a>
                    <a href="/Terms/" class="text-gray-400 hover:text-green-300 transition-colors">Terms of Service</a>
                    <a href="#accessibility" class="text-gray-400 hover:text-green-300 transition-colors">Accessibility</a>
                    <a href="https://maps.app.goo.gl/KizBckhnd7mzN6sF9" class="text-gray-400 hover:text-green-300 transition-colors">Sitemap</a>
                    </div>
                </div>
                </div>
            </div>
            </div>
        </div>
    </footer>

    <script>
        let allData = [];
        let filteredData = [];

        // CSV parsing function
        function parseCSV(csvText) {
            const lines = csvText.split('\n');
            const headers = lines[0].split(',').map(h => h.trim().replace(/"/g, ''));
            const data = [];
            
            for (let i = 1; i < lines.length; i++) {
                if (lines[i].trim()) {
                    const values = parseCSVLine(lines[i]);
                    const row = {};
                    headers.forEach((header, index) => {
                        row[header] = values[index] || '';
                    });
                    data.push(row);
                }
            }
            return data;
        }

        function parseCSVLine(line) {
            const result = [];
            let current = '';
            let inQuotes = false;
            
            for (let i = 0; i < line.length; i++) {
                const char = line[i];
                
                if (char === '"') {
                    if (inQuotes && line[i + 1] === '"') {
                        // Handle escaped quotes
                        current += '"';
                        i++; // Skip next quote
                    } else {
                        inQuotes = !inQuotes;
                    }
                } else if (char === ',' && !inQuotes) {
                    result.push(current.trim().replace(/^"|"$/g, ''));
                    current = '';
                } else {
                    current += char;
                }
            }
            result.push(current.trim().replace(/^"|"$/g, ''));
            return result;
        }

        // Load and parse CSV data
        async function loadData() {
            try {
                // Try multiple URLs for the CSV data
                const urls = [
                    'https://docs.google.com/spreadsheets/d/e/2PACX-1vTtbl6w2Cu44Sj3NocFki0q43pIkSIYKNpDMHpLy_IzqeAv3MEZzioXuZsarU7tmFvbtq-qIsBmVq4L/pub?gid=0&single=true&output=csv',
                    'https://docs.google.com/spreadsheets/d/1tbl6w2Cu44Sj3NocFki0q43pIkSIYKNpDMHpLy_IzqeAv3M/export?format=csv&gid=0'
                ];
                
                let csvText = '';
                
                // Try each URL until one works
                for (const url of urls) {
                    try {
                        console.log('Attempting to load data from:', url);
                        const response = await fetch(url);
                        csvText = await response.text();
                        
                        // Check if we got valid CSV data
                        if (csvText && csvText.length > 100 && csvText.includes('Year Turned-Over')) {
                            console.log('Successfully loaded data from:', url);
                            break;
                        }
                    } catch (e) {
                        console.log('Failed to load from:', url, e);
                    }
                }
                
                // If no data loaded from external sources, use sample data
                if (!csvText || csvText.length < 100 || !csvText.includes('Year Turned-Over')) {
                    console.log('No data loaded from external sources, using sample data for demonstration');
                    csvText = `"Year Turned-Over","Day-Month Turned-Over","Acceptance Form Number","Sex","Common Name","Scientific Name","Photo","Nickname (if any)","Cage No.","Health Status","Remarks","Candidate for Release","Deceased","Date","Probable Cause of Death","Release Date","Release Location","Turned-Over By","Office/Address","Species Description","Biogeography Staus","IUCN Status","Medical Treatments Administered","Manner of Release"
"2019","24-May","WRC-D-005-2019-23","Male","Long Tailed Macaque","Macaca fascicularis","https://images.unsplash.com/photo-1540573133985-87b6da6d54a9?w=300&h=200&fit=crop","Charlie","24","Critical II","Injured left arm from trap","Not Yet","No","","","","","Dr. Maria Santos","Barangay Health Center Quezon City","https://en.wikipedia.org/wiki/Crab-eating_macaque","Endemic","Least Concern","https://example.com/medical-treatments/antibiotics-wound-care","Soft release"
"2019","2-Aug","WRC-D-008-2019-37","Male","Long Tailed Macaque","Macaca fascicularis","https://images.unsplash.com/photo-1540573133985-87b6da6d54a9?w=300&h=200&fit=crop","Junjun","26","Critical I","Severe dehydration and malnutrition","Not Yet","No","","","","","Local Farmer Juan Cruz","Sitio Malaki Laguna","Medium-sized primate with long tail highly adaptable to various habitats","Endemic","Least Concern","https://example.com/medical-treatments/iv-fluids-nutrition","Hard release"
"2020","15-Mar","WRC-D-012-2020-45","Female","Philippine Eagle","Pithecophaga jefferyi","https://images.unsplash.com/photo-1552728089-57bdde30beb3?w=300&h=200&fit=crop","Aguila","12","Stable","Recovering well from wing injury","Yes","No","","","15-Apr-2020","14.2456 121.0467","DENR Officer Rodriguez","DENR Regional Office IV-A","https://en.wikipedia.org/wiki/Philippine_eagle","Endemic","Critically Endangered","https://example.com/medical-treatments/wing-splinting-therapy","Soft release with monitoring"
"2020","8-Jun","WRC-D-018-2020-52","Male","Tarsier","Carlito syrichta","https://images.unsplash.com/photo-1564349683136-77e08dba1ef7?w=300&h=200&fit=crop","Tiny","8","Recovering","Good progress with eye treatment","Not Yet","No","","","","","Wildlife Photographer Ana Reyes","Bohol Tourism Office","https://en.wikipedia.org/wiki/Philippine_tarsier","Endemic","Near Threatened","https://example.com/medical-treatments/eye-drops-antibiotics","Soft release"
"2021","12-Jan","WRC-D-003-2021-15","Female","Binturong","Arctictis binturong","https://images.unsplash.com/photo-1564349683136-77e08dba1ef7?w=300&h=200&fit=crop","Blackie","15","Critical I","Needs intensive care for respiratory issues","Not Yet","No","","","","","Park Ranger Miguel Torres","Subic Bay Forest Reserve","https://en.wikipedia.org/wiki/Binturong","Native","Vulnerable","https://example.com/medical-treatments/respiratory-therapy","Hard release"
"2021","5-Apr","WRC-D-007-2021-28","Female","Philippine Deer","Rusa marianna","https://images.unsplash.com/photo-1551892374-ecf8754cf8b0?w=300&h=200&fit=crop","Bambi","3","Stable","Orphaned fawn doing well","Yes","No","","","22-May-2021","13.7565 121.0583","Concerned Citizen Lisa Garcia","Barangay San Isidro Batangas","Medium-sized deer species endemic to the Philippines","Endemic","Vulnerable","https://example.com/medical-treatments/milk-formula-vaccination","Direct release to protected area"
"2021","18-Jul","WRC-D-011-2021-34","Male","Monitor Lizard","Varanus salvator","https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=300&h=200&fit=crop","Rex","19","Recovering","Tail injury healing nicely","Not Yet","No","","","","","Fisherman Roberto Dela Cruz","Coastal Barangay Palawan","Large semi-aquatic lizard excellent swimmer and climber","Native","Least Concern","https://example.com/medical-treatments/wound-care-antibiotics","Soft release"
"2022","3-Feb","WRC-D-002-2022-08","Female","Flying Lemur","Cynocephalus volans","https://images.unsplash.com/photo-1564349683136-77e08dba1ef7?w=300&h=200&fit=crop","Glider","7","Critical II","Electrocution from power lines","Not Yet","No","","","","","Electric Company Worker Carlos Mendez","Meralco Substation Manila","Gliding mammal with membrane between limbs strictly arboreal","Endemic","Least Concern","https://example.com/medical-treatments/burn-treatment-pain-management","Hard release"
"2022","14-May","WRC-D-009-2022-41","Male","Pangolin","Manis javanica","https://images.unsplash.com/photo-1564349683136-77e08dba1ef7?w=300&h=200&fit=crop","Armor","22","Stable","Rescued from illegal trade","Yes","No","","","8-Jun-2022","14.6760 121.0437","NBI Agent Patricia Lim","National Bureau of Investigation","Scaly anteater with protective armor feeds exclusively on ants and termites","Native","Critically Endangered","https://example.com/medical-treatments/stress-reduction-therapy","Soft release with GPS tracking"
"2022","29-Aug","WRC-D-015-2022-56","Female","Hornbill","Buceros hydrocorax","https://images.unsplash.com/photo-1552728089-57bdde30beb3?w=300&h=200&fit=crop","Bella","11","Recovering","Broken beak repair successful","Not Yet","No","","","","","Forest Guard Elena Ramos","Mt. Makiling Forest Reserve","Large frugivorous bird with distinctive casque important seed disperser","Endemic","Near Threatened","https://example.com/medical-treatments/beak-reconstruction-surgery","Soft release"
"2023","10-Jan","WRC-D-001-2023-03","Male","Civet Cat","Paradoxurus hermaphroditus","https://images.unsplash.com/photo-1564349683136-77e08dba1ef7?w=300&h=200&fit=crop","Shadow","16","Critical I","Hit by vehicle severe internal injuries","Not Yet","Yes","15-Jan-2023","Internal bleeding","","","Veterinarian Dr. Jose Mercado","Animal Hospital Cebu City","Nocturnal omnivore with masked face excellent climber","Native","Least Concern","https://example.com/medical-treatments/emergency-surgery-blood-transfusion","Hard release"
"2023","22-Mar","WRC-D-006-2023-19","Female","Sea Turtle","Chelonia mydas","https://images.unsplash.com/photo-1559827260-dc66d52bef19?w=300&h=200&fit=crop","Marina","1","Stable","Plastic ingestion treated successfully","Yes","No","","","10-Apr-2023","14.5906 120.9777","Marine Biologist Dr. Sarah Chen","Marine Science Institute UP Diliman","Large marine reptile herbivorous as adult important for marine ecosystems","Migratory","Endangered","https://example.com/medical-treatments/endoscopic-plastic-removal","Beach release with satellite tag"
"2023","7-Jun","WRC-D-010-2023-33","Male","Fruit Bat","Pteropus vampyrus","https://images.unsplash.com/photo-1564349683136-77e08dba1ef7?w=300&h=200&fit=crop","Batman","5","Recovering","Wing membrane tear healing well","Not Yet","No","","","","","Cave Explorer Mark Johnson","Philippine Speleological Society","Large fruit bat with 1.5m wingspan important pollinator and seed disperser","Native","Near Threatened","https://example.com/medical-treatments/wing-membrane-repair","Soft release"
"2023","19-Sep","WRC-D-014-2023-47","Female","Wild Boar","Sus scrofa","https://images.unsplash.com/photo-1551892374-ecf8754cf8b0?w=300&h=200&fit=crop","Wilma","20","Critical II","Snare trap wounds on legs","Not Yet","No","","","","","Hunter Association Rep. Tony Valdez","Hunters Association Mindanao","Omnivorous ungulate important ecosystem engineer","Native","Least Concern","https://example.com/medical-treatments/wound-debridement-antibiotics","Hard release"
"2024","4-Feb","WRC-D-004-2024-12","Male","Reticulated Python","Malayopython reticulatus","https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=300&h=200&fit=crop","Monty","25","Stable","Skin infection cleared up","Yes","No","","","","","Herpetologist Dr. Amanda Cruz","University of the Philippines Los Ba√±os","Large non-venomous constrictor important predator in ecosystem","Native","Least Concern","https://example.com/medical-treatments/antifungal-treatment","Direct release to suitable habitat"`;
                }
                
                const data = parseCSV(csvText);
                console.log('Parsed data rows:', data.length);
                console.log('First row headers:', Object.keys(data[0] || {}));
                
                allData = data.map((row, index) => ({
                    id: index,
                    year: row['Year Turned-Over'] || '',
                    date: row['Day-Month Turned-Over'] || '',
                    formNumber: row['Acceptance Form Number'] || '',
                    sex: row['Sex'] || '',
                    commonName: row['Common Name'] || '',
                    scientificName: row['Scientific Name'] || '',
                    photo: row['Photo'] || 'https://via.placeholder.com/300x200?text=No+Image',
                    nickname: row['Nickname (if any)'] || '',
                    cageNo: row['Cage No.'] || '',
                    healthStatus: row['Health Status'] || '',
                    remarks: row['Remarks'] || '',
                    candidateForRelease: row['Candidate for Release'] || '',
                    deceased: row['Deceased'] || '',
                    deathDate: row['Date of Death'] || row['Date'] || '',
                    causeOfDeath: row['Probable Cause of Death'] || '',
                    releaseDate: row['Release Date'] || '',
                    releaseLocation: row['Release Location'] || '',
                    turnedOverBy: row['Turned-Over By'] || '',
                    officeAddress: row['Office/Address'] || '',
                    speciesDescription: row['Species Description'] || '',
                    biogeographyStatus: row['Biogeography Staus'] || '',
                    iucnStatus: row['IUCN Status'] || '',
                    medicalTreatments: row['Medical Treatments Administered'] || '',
                    mannerOfRelease: row['Manner of Release'] || ''
                }));

                filteredData = [...allData];
                populateFilters();
                renderCards();
                updateTotalCount();
                
                // Hide loading, show content
                document.getElementById('loadingState').classList.add('hidden');
                document.getElementById('cardsContainer').classList.remove('hidden');
            } catch (error) {
                console.error('Error loading data:', error);
                document.getElementById('loadingState').innerHTML = '<div class="text-center py-12"><p class="text-red-600">Error loading data. Please try again later.</p></div>';
            }
        }

        function populateFilters() {
            // Populate species filter
            const species = [...new Set(allData.map(item => item.commonName))].filter(Boolean).sort();
            const speciesSelect = document.getElementById('speciesFilter');
            species.forEach(s => {
                const option = document.createElement('option');
                option.value = s;
                option.textContent = s;
                speciesSelect.appendChild(option);
            });

            // Populate year filter
            const years = [...new Set(allData.map(item => item.year))].filter(Boolean).sort((a, b) => b - a);
            const yearSelect = document.getElementById('yearFilter');
            years.forEach(y => {
                const option = document.createElement('option');
                option.value = y;
                option.textContent = y;
                yearSelect.appendChild(option);
            });


        }

        function getStatusClass(status) {
            switch(status) {
                case 'Critical I': return 'status-critical-i';
                case 'Critical II': return 'status-critical-ii';
                case 'Stable': return 'status-stable';
                case 'Recovering': return 'status-recovering';
                default: return 'bg-gray-500';
            }
        }

        function getIUCNStatusClass(status) {
            switch(status) {
                case 'Least Concern': return 'bg-green-600 text-white';
                case 'Near Threatened': return 'bg-yellow-600 text-white';
                case 'Vulnerable': return 'bg-orange-600 text-white';
                case 'Endangered': return 'bg-red-600 text-white';
                case 'Critically Endangered': return 'bg-red-800 text-white';
                default: return 'bg-gray-600 text-white';
            }
        }

        function renderCards() {
            const grid = document.getElementById('cardsGrid');
            grid.innerHTML = '';

            filteredData.forEach(animal => {
                const card = document.createElement('div');
                card.className = 'bg-white rounded-2xl overflow-hidden shadow-lg card-hover cursor-pointer';
                card.onclick = () => openModal(animal);
                
                card.innerHTML = `
                    <div class="relative">
                        <img src="${animal.photo}" alt="${animal.commonName}" 
                             class="w-full h-64 object-contain bg-gray-100"
                             onerror="this.src='https://via.placeholder.com/300x400/10b981/ffffff?text=${encodeURIComponent(animal.commonName || 'Wildlife')}'; this.alt='Placeholder image';">
                        <div class="absolute top-3 right-3">
                            <span class="px-2 py-1 rounded-full text-xs font-medium text-white ${getStatusClass(animal.healthStatus)}">
                                ${animal.healthStatus || 'Unknown'}
                            </span>
                        </div>
                        ${animal.nickname ? `<div class="absolute top-3 left-3 bg-black/70 text-white px-2 py-1 rounded-full text-xs">${animal.nickname}</div>` : ''}
                    </div>
                    <div class="p-4">
                        <h3 class="font-semibold text-gray-900 mb-1">${animal.commonName || 'Unknown Species'}</h3>
                        <p class="text-sm text-gray-600 italic mb-2">${animal.scientificName || ''}</p>
                        <div class="flex items-center justify-between text-xs text-gray-500">
                            <span>${animal.sex || 'Unknown'}</span>
                            <span>Cage ${animal.cageNo || 'N/A'}</span>
                        </div>
                        <div class="mt-2 flex items-center justify-between">
                            <span class="text-xs text-gray-500">${animal.year} ‚Ä¢ ${animal.date}</span>
                            ${animal.iucnStatus ? `<span class="px-2 py-1 rounded-full text-xs font-medium ${getIUCNStatusClass(animal.iucnStatus)}">${animal.iucnStatus}</span>` : ''}
                        </div>
                    </div>
                `;
                
                grid.appendChild(card);
            });
        }

        function openModal(animal) {
            const modal = document.getElementById('modal');
            const content = document.getElementById('modalContent');
            
            content.innerHTML = `
                <div class="relative">
                    <button onclick="closeModal()" class="absolute top-4 right-4 z-10 bg-black/50 text-white rounded-full w-8 h-8 flex items-center justify-center hover:bg-black/70 transition-colors">
                        ‚úï
                    </button>
                    <img src="${animal.photo}" alt="${animal.commonName}" 
                         class="w-full h-80 object-contain bg-gray-100"
                         onerror="this.src='https://via.placeholder.com/600x800/10b981/ffffff?text=${encodeURIComponent(animal.commonName || 'Wildlife')}'; this.alt='Placeholder image';">
                    <div class="absolute bottom-4 left-4">
                        <span class="px-3 py-1 rounded-full text-sm font-medium text-white ${getStatusClass(animal.healthStatus)}">
                            ${animal.healthStatus || 'Unknown Status'}
                        </span>
                    </div>
                </div>
                
                <div class="p-6">
                    <div class="flex items-start justify-between mb-4">
                        <div>
                            <h2 class="text-2xl font-bold text-gray-900 mb-1">${animal.commonName || 'Unknown Species'}</h2>
                            <p class="text-lg text-gray-600 italic">${animal.scientificName || 'Not specified'}</p>
                            <p class="text-sm text-green-600 font-medium mt-1">Nickname: ${animal.nickname || 'None assigned'}</p>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="space-y-4">
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h3 class="font-semibold text-gray-900 mb-3">Basic Information</h3>
                                <div class="space-y-2 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">Year Turned-Over:</span>
                                        <span class="font-medium">${animal.year || 'Not recorded'}</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">Day-Month Turned-Over:</span>
                                        <span class="font-medium">${animal.date || 'Not recorded'}</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">Acceptance Form Number:</span>
                                        <span class="font-medium">${animal.formNumber || 'Not assigned'}</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">Sex:</span>
                                        <span class="font-medium">${animal.sex || 'Unknown'}</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">Common Name:</span>
                                        <span class="font-medium">${animal.commonName || 'Unknown Species'}</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">Scientific Name:</span>
                                        <span class="font-medium italic">${animal.scientificName || 'Not specified'}</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">Cage Number:</span>
                                        <span class="font-medium">${animal.cageNo || 'Not assigned'}</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-purple-50 rounded-lg p-4">
                                <h3 class="font-semibold text-purple-900 mb-3">Submission Details</h3>
                                <div class="space-y-2 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-purple-600">Turned-Over By:</span>
                                        <span class="font-medium">${animal.turnedOverBy || 'Not recorded'}</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-purple-600">Office/Address:</span>
                                        <span class="font-medium">${animal.officeAddress || 'Not specified'}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="bg-gray-50 rounded-lg p-4">
                                <h3 class="font-semibold text-gray-900 mb-3">Health & Status</h3>
                                <div class="space-y-2 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">Health Status:</span>
                                        <span class="font-medium">${animal.healthStatus || 'Not assessed'}</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">Candidate for Release:</span>
                                        <span class="font-medium ${animal.candidateForRelease === 'Yes' ? 'text-green-600' : animal.candidateForRelease === 'No' ? 'text-red-600' : 'text-orange-600'}">${animal.candidateForRelease || 'Under evaluation'}</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">Current Status:</span>
                                        <span class="font-medium ${animal.deceased === 'Yes' ? 'text-red-600' : 'text-green-600'}">${animal.deceased === 'Yes' ? 'Deceased' : 'Alive'}</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">Release Date:</span>
                                        <span class="font-medium">${animal.releaseDate || 'Not released yet'}</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">Manner of Release:</span>
                                        <span class="font-medium">${animal.mannerOfRelease || 'Not specified'}</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-gray-600">Release Location:</span>
                                        <span class="font-medium">${animal.releaseLocation || 'Not specified'}</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-orange-50 rounded-lg p-4">
                                <h3 class="font-semibold text-orange-900 mb-3">Conservation Status</h3>
                                <div class="space-y-2 text-sm">
                                    <div class="flex justify-between">
                                        <span class="text-orange-600">Biogeography Status:</span>
                                        <span class="font-medium">${animal.biogeographyStatus || 'Not assessed'}</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-orange-600">IUCN Status:</span>
                                        <span class="font-medium">${animal.iucnStatus || 'Not listed'}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-6 bg-teal-50 rounded-lg p-4">
                        <h3 class="font-semibold text-teal-900 mb-2">Species Description</h3>
                        ${animal.speciesDescription && animal.speciesDescription !== '-' && animal.speciesDescription.startsWith('http') ? `
                            <div class="flex items-center space-x-2">
                                <a href="${animal.speciesDescription}" target="_blank" rel="noopener noreferrer" 
                                   class="text-sm text-teal-600 hover:text-teal-800 underline hover:no-underline transition-colors flex items-center space-x-1">
                                    <span>View detailed species information</span>
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                                    </svg>
                                </a>
                            </div>
                        ` : `
                            <p class="text-sm text-teal-700">${animal.speciesDescription && animal.speciesDescription !== '-' ? animal.speciesDescription : 'No species description available'}</p>
                        `}
                    </div>
                    
                    <div class="mt-6 bg-indigo-50 rounded-lg p-4">
                        <h3 class="font-semibold text-indigo-900 mb-2">Medical Treatments Administered</h3>
                        ${animal.medicalTreatments && animal.medicalTreatments !== '-' ? `
                            <div class="flex items-center space-x-2">
                                <a href="${animal.medicalTreatments}" target="_blank" rel="noopener noreferrer" 
                                   class="text-sm text-indigo-600 hover:text-indigo-800 underline hover:no-underline transition-colors flex items-center space-x-1">
                                    <span>${animal.medicalTreatments}</span>
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                                    </svg>
                                </a>
                            </div>
                        ` : `
                            <p class="text-sm text-indigo-700">No medical treatments recorded</p>
                        `}
                    </div>
                    
                    <div class="mt-6 bg-blue-50 rounded-lg p-4">
                        <h3 class="font-semibold text-gray-900 mb-2">Remarks</h3>
                        <p class="text-sm text-gray-700">${animal.remarks && animal.remarks !== '-' ? animal.remarks : 'No remarks recorded yet'}</p>
                    </div>
                    
                    <div class="mt-6 bg-red-50 rounded-lg p-4">
                        <h3 class="font-semibold text-red-900 mb-2">Mortality Information</h3>
                        <div class="text-sm text-red-700 space-y-1">
                            <p><strong>Deceased:</strong> ${animal.deceased || 'No'}</p>
                            <p><strong>Date of Death:</strong> ${(animal.deathDate && animal.deathDate.trim() !== '') ? animal.deathDate : 'N/A'}</p>
                            <p><strong>Probable Cause of Death:</strong> ${(animal.causeOfDeath && animal.causeOfDeath.trim() !== '') ? animal.causeOfDeath : 'N/A'}</p>
                        </div>
                    </div>
                    
                    <div class="mt-6 bg-green-50 rounded-lg p-4">
                        <h3 class="font-semibold text-green-900 mb-3">Release Location</h3>
                        ${animal.releaseLocation && animal.releaseLocation !== 'Not specified' ? `
                            <p class="text-sm text-green-700 mb-3"><strong>Location:</strong> ${animal.releaseLocation}</p>
                            <div class="bg-white rounded-lg overflow-hidden border border-green-200">
                                <div id="map-${animal.id}" style="height: 200px; width: 100%;"></div>
                                <div class="p-2 text-xs text-gray-500 bg-gray-50">
                                    ¬© <a href="https://www.openstreetmap.org/copyright" target="_blank" class="text-blue-600 hover:underline">OpenStreetMap</a> contributors
                                </div>
                            </div>
                        ` : `
                            <p class="text-sm text-gray-600">No release location recorded yet</p>
                            <div class="bg-gray-100 rounded-lg p-8 text-center text-gray-400 mt-3">
                                <p>üó∫Ô∏è</p>
                                <p class="text-xs mt-2">Map will appear when release location is added</p>
                            </div>
                        `}
                    </div>
                </div>
            `;
            
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            
            // Initialize map if release location exists
            if (animal.releaseLocation && animal.releaseLocation !== 'Not specified') {
                setTimeout(() => {
                    initializeMap(animal);
                }, 100);
            }
        }

        function initializeMap(animal) {
            const mapId = `map-${animal.id}`;
            const mapContainer = document.getElementById(mapId);
            
            if (!mapContainer) return;
            
            // Parse coordinates from location string
            let lat = 14.5995; // Default to Manila, Philippines
            let lng = 120.9842;
            
            const location = animal.releaseLocation;
            
            // Check if location contains coordinates (format: "lat, lng" or "lat,lng")
            const coordMatch = location.match(/(-?\d+\.?\d*)\s*,\s*(-?\d+\.?\d*)/);
            if (coordMatch) {
                lat = parseFloat(coordMatch[1]);
                lng = parseFloat(coordMatch[2]);
            }
            
            // Initialize the map
            const map = L.map(mapId).setView([lat, lng], 10);
            
            // Add OpenStreetMap tiles
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '¬© OpenStreetMap contributors'
            }).addTo(map);
            
            // Add marker
            const marker = L.marker([lat, lng]).addTo(map);
            
            // Add popup with location info
            marker.bindPopup(`
                <div class="text-center">
                    <strong>${animal.commonName}</strong><br>
                    <small>Release Location</small><br>
                    ${location}
                </div>
            `).openPopup();
        }

        function closeModal() {
            document.getElementById('modal').classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        function openSpeciesModal(url, commonName, scientificName) {
            const modal = document.getElementById('speciesModal');
            const content = document.getElementById('speciesModalContent');
            
            content.innerHTML = `
                <div class="relative">
                    <button onclick="closeSpeciesModal()" class="absolute top-4 right-4 z-10 bg-black/50 text-white rounded-full w-8 h-8 flex items-center justify-center hover:bg-black/70 transition-colors">
                        ‚úï
                    </button>
                    <div class="bg-gradient-to-r from-teal-500 to-emerald-600 text-white p-6">
                        <h2 class="text-2xl font-bold mb-2">${commonName}</h2>
                        <p class="text-lg italic opacity-90">${scientificName}</p>
                        <p class="text-sm opacity-75 mt-2">Species Information</p>
                    </div>
                </div>
                
                <div class="p-6">
                    <div class="bg-blue-50 rounded-lg p-4 mb-6">
                        <div class="flex items-center space-x-2 mb-3">
                            <svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                            <h3 class="font-semibold text-blue-900">Loading Species Information</h3>
                        </div>
                        <p class="text-sm text-blue-700 mb-4">Fetching detailed information from external source...</p>
                        <div class="flex items-center space-x-2">
                            <div class="animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"></div>
                            <span class="text-sm text-blue-600">Please wait...</span>
                        </div>
                    </div>
                    
                    <div id="speciesContent" class="min-h-[400px]">
                        <!-- Content will be loaded here -->
                    </div>
                    
                    <div class="mt-6 bg-gray-50 rounded-lg p-4">
                        <h3 class="font-semibold text-gray-900 mb-2">External Link</h3>
                        <div class="flex items-center space-x-2">
                            <a href="${url}" target="_blank" rel="noopener noreferrer" 
                               class="text-blue-600 hover:text-blue-800 underline hover:no-underline transition-colors flex items-center space-x-1">
                                <span>Open in new tab</span>
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                                </svg>
                            </a>
                        </div>
                        <p class="text-xs text-gray-500 mt-1">Source: ${url}</p>
                    </div>
                </div>
            `;
            
            modal.classList.remove('hidden');
            
            // Load content in iframe
            setTimeout(() => {
                loadSpeciesContent(url);
            }, 500);
        }

        function loadSpeciesContent(url) {
            const contentDiv = document.getElementById('speciesContent');
            
            // Create iframe to load the external content
            const iframe = document.createElement('iframe');
            iframe.src = url;
            iframe.className = 'w-full h-96 border border-gray-200 rounded-lg';
            iframe.style.minHeight = '400px';
            
            // Handle iframe load events
            iframe.onload = function() {
                const loadingDiv = contentDiv.parentElement.querySelector('.bg-blue-50');
                if (loadingDiv) {
                    loadingDiv.innerHTML = `
                        <div class="flex items-center space-x-2 mb-2">
                            <svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                            </svg>
                            <h3 class="font-semibold text-green-900">Species Information Loaded</h3>
                        </div>
                        <p class="text-sm text-green-700">External content loaded successfully below.</p>
                    `;
                    loadingDiv.className = 'bg-green-50 rounded-lg p-4 mb-6';
                }
            };
            
            iframe.onerror = function() {
                contentDiv.innerHTML = `
                    <div class="bg-red-50 rounded-lg p-6 text-center">
                        <svg class="w-12 h-12 text-red-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                        </svg>
                        <h3 class="text-lg font-semibold text-red-900 mb-2">Unable to Load Content</h3>
                        <p class="text-sm text-red-700 mb-4">The external website cannot be displayed in this frame due to security restrictions.</p>
                        <p class="text-xs text-red-600">Please use the "Open in new tab" link above to view the species information.</p>
                    </div>
                `;
                
                const loadingDiv = contentDiv.parentElement.querySelector('.bg-blue-50');
                if (loadingDiv) {
                    loadingDiv.remove();
                }
            };
            
            contentDiv.appendChild(iframe);
        }

        function closeSpeciesModal() {
            document.getElementById('speciesModal').classList.add('hidden');
        }

        function applyFilters() {
            const speciesFilter = document.getElementById('speciesFilter').value;
            const statusFilter = document.getElementById('statusFilter').value;
            const yearFilter = document.getElementById('yearFilter').value;

            filteredData = allData.filter(animal => {
                return (!speciesFilter || animal.commonName === speciesFilter) &&
                       (!statusFilter || animal.healthStatus === statusFilter) &&
                       (!yearFilter || animal.year == yearFilter);
            });

            renderCards();
            updateTotalCount();
        }

        function clearFilters() {
            document.getElementById('speciesFilter').value = '';
            document.getElementById('statusFilter').value = '';
            document.getElementById('yearFilter').value = '';
            filteredData = [...allData];
            renderCards();
            updateTotalCount();
        }

        function updateTotalCount() {
            const countText = `${filteredData.length} Animals`;
            document.getElementById('totalCount').textContent = countText;
            const desktopCount = document.getElementById('totalCountDesktop');
            if (desktopCount) {
                desktopCount.textContent = countText;
            }
        }

        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobileMenu');
            mobileMenu.classList.toggle('hidden');
        }

        // Event listeners
        document.getElementById('speciesFilter').addEventListener('change', applyFilters);
        document.getElementById('statusFilter').addEventListener('change', applyFilters);
        document.getElementById('yearFilter').addEventListener('change', applyFilters);

        function toggleLegend() {
            const legendPanel = document.getElementById('legendPanel');
            legendPanel.classList.toggle('hidden');
        }

        // Close modal on escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeModal();
                closeSpeciesModal();
            }
        });

        // Newsletter signup handler
        function handleNewsletterSignup(event) {
            event.preventDefault();
            const email = event.target.querySelector('input[type="email"]').value;
            
            // Show success message
            const form = event.target;
            const originalHTML = form.innerHTML;
            
            form.innerHTML = `
                <div class="text-center py-4">
                    <div class="w-12 h-12 bg-green-600 rounded-full flex items-center justify-center mx-auto mb-3">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </div>
                    <p class="text-green-300 font-medium text-sm">Thank you for subscribing!</p>
                    <p class="text-gray-400 text-xs mt-1">We'll keep you updated on our wildlife rescue efforts.</p>
                </div>
            `;
            
            // Reset form after 3 seconds
            setTimeout(() => {
                form.innerHTML = originalHTML;
            }, 3000);
        }

        // Load data on page load
        loadData();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97ade137e103064f',t:'MTc1NzE2MDgwMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>

<script>
  document.addEventListener("contextmenu", e => e.preventDefault());
  document.onkeydown = function(e) {
    if (e.keyCode === 123 || (e.ctrlKey && e.shiftKey && e.keyCode === 'I'.charCodeAt(0))) {
      return false;
    }
  };
</script>


</body>
</html>
